# Callback Protocol

# For other parameters, please refer to the official documentation: https://app.klingai.com/cn/dev/document-api/apiReference/updateNotice

The parameters are consistent; during integration, you only need to change the request domain name and API key to ours.

# Asynchronous task callback protocol

For asynchronous tasks (image generation/video generation), if `callback_url` is set when the task is created, the server will actively send a notification when the task status changes.

## Callback data format

```json
{
  "task_id": "string", // Task ID, generated by the system
  "task_status": "string", // Task status
  "task_status_msg": "string", // Task status information
  "created_at": 1722769557708, // Task creation time (Unix timestamp, in milliseconds)
  "updated_at": 1722769557708, // Task update time (Unix timestamp, in milliseconds)
  "task_result": {
    "images": [
      // Results of image-related tasks
      {
        "index": 0, // Image number, 0-9
        "url": "string" // URL for generating the image
      }
    ],
    "videos": [
      // Results of video tasks
      {
        "id": "string", // Video ID, globally unique
        "url": "string", // Video URL
        "duration": "string" // Total video duration, in seconds
      }
    ]
  }
}
```

## Task Status Description

`task_status` Possible enumeration values:

- `submitted`: Submitted
- `processing`: Processing
- `succeed`: success
- `failed`: fail

## Precautions

- When a task fails, `task_status_msg` will display the reason for the failure (such as triggering the platform's content risk control).
- Example image URL: `https://h1.inkwai.com/bs2/upload-ylab-stunt/1fa0ac67d8ce6cd55b50d68b967b3a59.png`
